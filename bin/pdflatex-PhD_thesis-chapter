#!/bin/bash

pdffilename=$(basename ~+)

if [[ $pdffilename == *appendix* ]] || [[ $pdffilename == *annexe* ]]
then
    generator=appendix
else
    generator=chapter
fi

pdflatex_complete_sequence -nc $lt_PhD_thesis_dir/tex/LT-These-${generator}_generator_with_toc

rename "s|generator_with_toc|generator|g" LT-These-${generator}_generator*

pdflatex -draftmode -interaction=batchmode -halt-on-error $lt_PhD_thesis_dir/tex/LT-These-${generator}_generator
pdflatex -interaction=batchmode -halt-on-error $lt_PhD_thesis_dir/tex/LT-These-${generator}_generator

rm_tex_aux_files
rm_feynmp_aux_files

mv LT-These-${generator}_generator.log LT-These-${generator}_generator.llog
rm *.log
mv LT-These-${generator}_generator.llog LT-These-${generator}_generator.log

mv LT-These-${generator}_generator.pdf $pdffilename.pdf &
mv LT-These-${generator}_generator.log $pdffilename.log &
mv LT-These-${generator}_generator.blg $pdffilename.blg &
wait
