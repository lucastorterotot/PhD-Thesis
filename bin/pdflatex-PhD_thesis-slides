#!/bin/bash

fast=0
fmf=0
bib=0
for arg in "$@"; do
    case "$arg" in
        -f)
            fast=1
            shift
            ;;
        --fast)
            fast=1
            shift
            ;;
        --fmf)
            fmf=1
            shift
            ;;
        -b)
            bib=1
            shift
            ;;
        --bib)
            bib=1
            shift
            ;;
    esac
done

cd $lt_PhD_thesis_dir/slides

if [[ $fast == 0 ]]
then
    pdflatex_complete_sequence $lt_PhD_thesis_dir/tex/LT-These-slides
else
    if [ -e LT-These-slides.bcf ]
    then
        if [[ $bib == 1 ]]
        then
            biber LT-These-slides
        fi
        if [[ $fmf == 1 ]]
        then
            for mpfile in $(find . -maxdepth 1 -type f -iname \*.mp) ; do
                mpost $mpfile
            done
        fi
        wait
        pdflatex -shell-escape -interaction=batchmode -halt-on-error $lt_PhD_thesis_dir/tex/LT-These-slides
    else
        pdflatex_complete_sequence -nc $lt_PhD_thesis_dir/tex/LT-These-slides
    fi
fi
check_LaTeX_logs
# mv LT-These-slides.log LT-These-slides.llog
# rm *.log
# mv LT-These-slides.llog LT-These-slides.log
