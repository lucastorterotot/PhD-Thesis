\def\trackerrin{.100}
\def\trackerrout{1.185}
\def\trackercolor{ltcolorgray1}

\def\ECALrin{1.290}
\def\ECALrout{1.811}
\def\ECALcolor{ltcolorgreen1}

\def\HCALrin{1.812}
\def\HCALrout{2.854}
\def\HCALcolor{ltcoloryellow3}

\def\Solenrin{2.950}
\def\Solenrout{3.800}
\def\Solencolor{ltcolorgray2}

\def\ironryrina{3.850}
\def\ironryrouta{4.000}
\def\muonrina{4.020}
\def\muonrouta{4.400}
\def\ironryrinb{4.420}
\def\ironryroutb{4.880}
\def\muonrinb{4.905}
\def\muonroutb{5.285}
\def\ironryrinc{5.300}
\def\ironryroutc{5.960}
\def\muonrinc{5.975}
\def\muonroutc{6.355}
\def\ironryrind{6.375}
\def\ironryroutd{6.980}
\def\muonrind{7.000}
\def\muonroutd{7.380}
\def\muonchcolor{ltcoloryellow1}
\def\ironrycolor{ltcolorred3}

\def\clipCircle#1#2{
\clip (#1,0) arc (0:360:#1) -- (#2,0) arc (360:0:#2) -- cycle ;
}
\def\clipTRK{\clipCircle{\trackerrin}{\trackerrout}}
\def\clipECAL{\clipCircle{\ECALrin}{\ECALrout}}
\def\clipHCAL{\clipCircle{\HCALrin}{\HCALrout}}

\def\clipMuCh#1#2{
\clip (15:#1)--(45:#1)--(75:#1)--(105:#1)--(135:#1)--(165:#1)--(195:#1)--(225:#1)--(255:#1)--(285:#1)--(315:#1)--(345:#1)--(375:#1)--(375:#2)--(345:#2)--(315:#2)--(285:#2)--(255:#2)--(225:#2)--(195:#2)--(165:#2)--(135:#2)--(105:#2)--(75:#2)--(45:#2)--(15:#2)--cycle;
}

\def\clipSlice{
\clip (-\trackerrout/3,\trackerrout/3) -- (\HCALrout,\muonroutd/4) -- (\muonroutd,\muonroutd/4) -- (\muonroutd,-\muonroutd/4) -- (\HCALrout,-\muonroutd/4) -- (-\trackerrout/3,-\trackerrout/3) -- cycle;
}

\def\drawCMS{
\foreach \rin/\rout/\color in {
\muonrind/\muonroutd/\muonchcolor,
\ironryrind/\ironryroutd/\ironrycolor,
\muonrinc/\muonroutc/\muonchcolor,
\ironryrinc/\ironryroutc/\ironrycolor,
\muonrinb/\muonroutb/\muonchcolor,
\ironryrinb/\ironryroutb/\ironrycolor,
\muonrina/\muonrouta/\muonchcolor
%\ironryrina/\ironryrouta/\ironrycolor
}{
\begin{scope}
\clipMuCh{\rin}{\rout}
\fill (0,0) [color = \color] circle (\rout);
\fill [color = \color] (15:\rout)--(45:\rout)--(75:\rout)--(105:\rout)--(135:\rout)--(165:\rout)--(195:\rout)--(225:\rout)--(255:\rout)--(285:\rout)--(315:\rout)--(345:\rout)--cycle;
\end{scope}
}
\foreach \rin/\rout/\color in {
\Solenrin/\Solenrout/\Solencolor,
\HCALrin/\HCALrout/\HCALcolor,
\ECALrin/\ECALrout/\ECALcolor,
\trackerrin/\trackerrout/\trackercolor
}{
\begin{scope}
\clipCircle{\rin}{\rout}
\fill (0,0) [color = \color] circle (\rout);
\end{scope}
%\fill (0,0) [color = white] circle (\rin);
}
}

\def\elecolor{ltcolorred}
\def\muoncolor{ltcolorblue}
\def\photoncolor{black}
\def\hadroncolor{ltcolororange}
\def\tauhcolor{ltcolorgreen4}
\def\jetcolor{ltcolororange}

\def\ECALdepositcolor{ltcolorblue4}
\def\HCALdepositcolor{ltcoloryellow4}

\def\MuChdepositcolor{ltcolorcyan2}

\def\printelenolabel#1{
\draw [thick, \elecolor] (0,0) arc (#1-90:#1-90+27:3);
}
\newcommand{\printelelabel}[2][\ele]{
\draw [\elecolor] (#2+17:1) node {#1};
}

\newcommand{\printele}[2][\ele]{
\printelenolabel{#2}
\printelelabel[#1]{#2}
}

\def\printantielenolabel#1{
\draw [thick, \elecolor] (0,0) arc (#1-90:#1-90-27:-3);
}
\newcommand{\printantielelabel}[2][\ele]{
\draw [\elecolor] (#2-17:1) node {#1};
}

\newcommand{\printantiele}[2][\ele]{
\printantielenolabel{#2}
\printantielelabel[#1]{#2}
}

\def\printmuonnolabel#1{
\draw [thick, \muoncolor]  (0,0) arc (#1-90:#1-90+33:6) arc (#1-90+33:#1-90:-12) ;
}
\newcommand{\printmuonlabel}[2][\mu]{
\draw [\muoncolor] (#2+5:2) node {#1};
}

\newcommand{\printmuon}[2][\mu]{
\printmuonnolabel{#2}
\printmuonlabel[#1]{#2}
}

\def\printantimuonnolabel#1{
\draw [thick, \muoncolor]  (0,0) arc (#1-90:#1-90-33:-6) arc (#1-90-33:#1-90:12) ;
}
\newcommand{\printantimuonlabel}[2][\mu]{
\draw [\muoncolor] (#2-5:2) node {#1};
}

\newcommand{\printantimuon}[2][\mu]{
\printantimuonnolabel{#2}
\printantimuonlabel[#1]{#2}
}

\def\printphotonnolabel#1{
\draw [thin, dashed, \photoncolor] (0,0) --+ (#1:{.5*(\ECALrin+\ECALrout)});
}
\newcommand{\printphotonlabel}[2][\photon]{
\draw [\photoncolor] (#2+10:{.75*\ECALrin+.25*\ECALrout}) node {#1};
}

\newcommand{\printphoton}[2][\photon]{
\printphotonnolabel{#2}
\printphotonlabel[#1]{#2}
}

\def\printneutrinonolabel#1{
\draw [thin, dotted, black] (0,0) --+ (#1:{1.5*\muonroutd});
}
\newcommand{\printneutrinolabel}[2][\neutrino]{
\draw [black] (#2+5:{.75*\HCALrin+.25*\HCALrout}) node {#1};
}

\newcommand{\printneutrino}[2][\neutrino]{
\printneutrinonolabel{#2}
\printneutrinolabel[#1]{#2}
}

\def\printhadronnolabel#1{
\draw [thick, \hadroncolor] (0,0) arc (#1+90:#1+90-22:5) ;
}
\newcommand{\printhadronlabel}[2][\hadronplus]{
\draw [\hadroncolor] (#2+3:1.5) node {#1};
}

\newcommand{\printhadron}[2][\hadronplus]{
\printhadronnolabel{#2}
\printhadronlabel[#1]{#2}
}

\def\printantihadronnolabel#1{
\draw [thick, \hadroncolor] (0,0) arc (#1-90:#1-90+22:5) ;
}
\newcommand{\printantihadronlabel}[2][\hadronminus]{
\draw [\hadroncolor] (#2-3:1.5) node {#1};
}

\newcommand{\printantihadron}[2][\hadronminus]{
\printantihadronnolabel{#2}
\printantihadronlabel[#1]{#2}
}

\def\printneutralhadronnolabel#1{
\draw [thin, dashed, \hadroncolor] (0,0) --+ (#1:{.5*(\HCALrin+\HCALrout)});
}
\newcommand{\printneutralhadronlabel}[2][\hadronnull]{
\draw [\hadroncolor] (#2-3:1.5) node {#1};
}

\newcommand{\printneutralhadron}[2][\hadronnull]{
\printneutralhadronnolabel{#2}
\printneutralhadronlabel[#1]{#2}
}

\newcommand{\printtauhnolabel}[2][30]{
\ifthenelse{\equal{#1}{31}\or\equal{#1}{11}}{
\draw [thin, dashed, \tauhcolor] (0,0) --+ (#2:{.5*(\ECALrin+\ECALrout)});
\draw [thin, dashed, \tauhcolor] (0,0) --+ (#2+7:{.5*(\ECALrin+\ECALrout)});
}{}
\ifthenelse{\equal{#1}{10}\or\equal{#1}{11}}{}{
\draw [thick, \tauhcolor] (0,0) arc (#2-90:#2-90+11:10) ;
\draw [thick, \tauhcolor] (0,0) arc (#2-90:#2-90-11:-10) ;
}
\draw [thick, \tauhcolor] (0,0) arc (#2-90:#2-90+6:20) ;
}

\newcommand{\printtauhlabel}[2][\tauh]{
\draw [\tauhcolor] (#2-12:1.5) node {#1};
}

\newcommand{\printtauh}[2][30]{
\printtauhnolabel[#1]{#2}
\printtauhlabel{#2}
}

\newcommand{\printantitauhnolabel}[2][30]{
\ifthenelse{\equal{#1}{31}\or\equal{#1}{11}}{
\draw [thin, dashed, \tauhcolor] (0,0) --+ (#2:{.5*(\ECALrin+\ECALrout)});
\draw [thin, dashed, \tauhcolor] (0,0) --+ (#2+7:{.5*(\ECALrin+\ECALrout)});
}{}
\ifthenelse{\equal{#1}{10}\or\equal{#1}{11}}{}{
\draw [thick, \tauhcolor] (0,0) arc (#2-90:#2-90-11:-10) ;
\draw [thick, \tauhcolor] (0,0) arc (#2-90:#2-90+11:10) ;
}
\draw [thick, \tauhcolor] (0,0) arc (#2-90:#2-90-6:-20) ;
}

\newcommand{\printantitauhlabel}[2][\tauh]{
\draw [\tauhcolor] (#2-12:1.5) node {#1};
}

\newcommand{\printantitauh}[2][30]{
\printantitauhnolabel[#1]{#2}
\printantitauhlabel{#2}
}

\def\printjetnolabel#1{
\draw [thick, \jetcolor] (0,0) arc (#1-90+10:#1-90+22+10:5) ;
\draw [thick, \jetcolor] (0,0) arc (#1-90+5:#1-90+12+5:10) ;
\draw [thick, \jetcolor] (0,0) arc (#1-90:#1-90-22:-5) ;
\draw [thick, \jetcolor] (0,0) arc (#1-90:#1-90+6:20) ;
\draw [thick, \jetcolor] (0,0) arc (#1-90+5:#1-90+8+5:10) ;
\draw [thick, \jetcolor] (0,0) arc (#1-90:#1-90-11:-10) ;
\draw [thick, \jetcolor] (0,0) arc (#1-90:#1-90+11:10) ;
\draw [thick, \jetcolor] (0,0) arc (#1+2-90:#1+2-90-27:-3); % antielectron
\draw [thick, \jetcolor] (0,0) arc (#1-1-90:#1-1-90+27:3); % electron
}
\newcommand{\printjetlabel}[2][jet]{
\draw [\jetcolor] (#2-25:.65) node {#1};
}

\newcommand{\printjet}[2][jet]{
\printjetnolabel{#2}
\printjetlabel[#1]{#2}
}

\def\printbigjetnolabel#1{
\printjetnolabel{#1+5}
\printjetnolabel{#1-5}
}
\newcommand{\printbigjetlabel}[2][jet]{
\printjetlabel[#1]{#2-5}
}

\newcommand{\printbigjet}[2][jet]{
\printbigjetnolabel{#2}
\printbigjetlabel[#1]{#2}
}

\def\printjetfakenolabel#1{
\printjetnolabel{#1}
\draw [thick, \tauhcolor] (0,0) arc (#1-90:#1-90+11:10) ;
\draw [thick, \tauhcolor] (0,0) arc (#1-90:#1-90+6:20) ;
\draw [thick, \tauhcolor] (0,0) arc (#1-90:#1-90-11:-10) ;
}
\newcommand{\printjetfakelabel}[2][f.\tauh]{
\draw [\tauhcolor] (#2-17:1.5) node {#1};
}

\newcommand{\printjetfake}[2][f.\tauh]{
\printjetfakenolabel{#2}
\printjetfakelabel[#1]{#2}
}



\def\printdeposit#1#2#3#4{
\fill [#1] (#2-2:#3) arc (#2-2:#2+2:#3) -- (#2+2:#4) arc (#2+2:#2-2:#4) ;
}

\def\printECALdeposit#1#2{\printdeposit{#1}{#2}{\ECALrin}{\ECALrout}}
\def\printHCALdeposit#1#2{\printdeposit{#1}{#2}{\HCALrin}{\HCALrout}}

\def\printeledeposit#1{\printECALdeposit{\ECALdepositcolor}{#1+14}}
\def\printantieledeposit#1{\printECALdeposit{\ECALdepositcolor}{#1-14}}

\def\printphotondeposit#1{\printECALdeposit{\ECALdepositcolor}{#1}}

\def\printhadrondeposit#1{\printHCALdeposit{\HCALdepositcolor}{#1-11}}
\def\printantihadrondeposit#1{\printHCALdeposit{\HCALdepositcolor}{#1+11}}
\def\printneutralhadrondeposit#1{\printHCALdeposit{\HCALdepositcolor}{#1}}

\newcommand{\printtauhdeposit}[2][30]{
\ifthenelse{\equal{#1}{31}\or\equal{#1}{11}}{
\printphotondeposit{#2}
\printphotondeposit{#2+7}
}{}
\ifthenelse{\equal{#1}{10}\or\equal{#1}{11}}{}{
\printHCALdeposit{\HCALdepositcolor}{#2+5}
\printHCALdeposit{\HCALdepositcolor}{#2-5}
}
\printHCALdeposit{\HCALdepositcolor}{#2+3}
}

\newcommand{\printantitauhdeposit}[2][30]{
\ifthenelse{\equal{#1}{31}\or\equal{#1}{11}}{
\printphotondeposit{#2}
\printphotondeposit{#2+7}
}{}
\ifthenelse{\equal{#1}{10}\or\equal{#1}{11}}{}{
\printHCALdeposit{\HCALdepositcolor}{#2+5}
\printHCALdeposit{\HCALdepositcolor}{#2-5}
}
\printHCALdeposit{\HCALdepositcolor}{#2-3}
}

\def\printjetdeposit#1{
\printHCALdeposit{\HCALdepositcolor}{#1+3}
\printHCALdeposit{\HCALdepositcolor}{#1+5}
\printHCALdeposit{\HCALdepositcolor}{#1-5}
\printHCALdeposit{\HCALdepositcolor}{#1+21}
\printHCALdeposit{\HCALdepositcolor}{#1+11}
\printHCALdeposit{\HCALdepositcolor}{#1-11}
\printECALdeposit{\ECALdepositcolor}{#1+2-14} %antielectron
\printECALdeposit{\ECALdepositcolor}{#1-1+14} % electron
}

\def\printbigjetdeposit#1{
\printjetdeposit{#1+5}
\printjetdeposit{#1-5}
}

\def\printMuChSigX#1#2#3#4#5#6{
\begin{scope}
\clipMuCh{#3}{#4}
\draw (0,0) + (#1+#5*#2:#4) coordinate (tmp1);
\draw (0,0) + (#1+#6*#2:#4) coordinate (tmp2);
\fill [\MuChdepositcolor]  (tmp1) -- (tmp2) -- (0,0) -- cycle ;
\end{scope}
}

\def\printMuChSigA#1#2{\printMuChSigX{#1}{#2}{\muonrina}{\muonrouta}{18}{21}}
\def\printMuChSigB#1#2{\printMuChSigX{#1}{#2}{\muonrinb}{\muonroutb}{19.25}{21.75}}
\def\printMuChSigC#1#2{\printMuChSigX{#1}{#2}{\muonrinc}{\muonroutc}{20}{21.5}}
\def\printMuChSigD#1#2{\printMuChSigX{#1}{#2}{\muonrind}{\muonroutd}{19.75}{21.25}}

\def\printmuondeposit#1{
\printMuChSigA{#1}{1}
\printMuChSigB{#1}{1}
\printMuChSigC{#1}{1}
\printMuChSigD{#1}{1}
}

\def\printantimuondeposit#1{
\printMuChSigA{#1}{-1}
\printMuChSigB{#1}{-1}
\printMuChSigC{#1}{-1}
\printMuChSigD{#1}{-1}
}

\def\printeletrk#1{
\begin{scope}
\clipTRK
\draw [very thick, dotted] (0,0) arc (#1-90:#1-90+27:3);
\end{scope}
}
\def\printantieletrk#1{
\begin{scope}
\clipTRK
\draw [very thick, dotted] (0,0) arc (#1-90:#1-90-27:-3);
\end{scope}
}

\def\printmuontrk#1{
\begin{scope}
\clipTRK
\draw [very thick, dotted]  (0,0) arc (#1-90:#1-90+33:6) arc (#1-90+33:#1-90:-12) ;
\end{scope}
}
\def\printantimuontrk#1{
\begin{scope}
\clipTRK
\draw [very thick, dotted]  (0,0) arc (#1-90:#1-90-33:-6) arc (#1-90-33:#1-90:12) ;
\end{scope}
}

\def\printhadrontrk#1{
\begin{scope}
\clipTRK
\draw [very thick, dotted] (0,0) arc (#1+90:#1+90-22:5) ;
\end{scope}
}
\def\printantihadrontrk#1{
\begin{scope}
\clipTRK
\draw [very thick, dotted] (0,0) arc (#1-90:#1-90+22:5) ;
\end{scope}
}
